From 48baa814d84215de2afbae696b6ed6cc95714f13 Mon Sep 17 00:00:00 2001
From: Hal Rosenstock <hal@mellanox.com>
Date: Fri, 14 Sep 2018 16:05:12 +0300
Subject: [PATCH] Add latest new device ID to device white lists

Signed-off-by: Hal Rosenstock <hal@mellanox.com>
---
 libibnetdisc/src/ibnetdisc.c | 2 +-
 src/ibdiag_common.c          | 1 +
 src/vendstat.c               | 1 +
 3 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/libibnetdisc/src/ibnetdisc.c b/libibnetdisc/src/ibnetdisc.c
index 05f1dc9..04bc5c5 100644
--- a/libibnetdisc/src/ibnetdisc.c
+++ b/libibnetdisc/src/ibnetdisc.c
@@ -208,7 +208,7 @@ static int is_mlnx_ext_port_info_supported(ibnd_port_t * port)
 	      devid == 0x1ba0 ||
 	      (devid >= 0x1bd0 && devid <= 0x1bd5))))
 		return 1;
-	if ((devid >= 0x1003 && devid <= 0x101b) ||
+	if ((devid >= 0x1003 && devid <= 0x101b) || (devid == 0xa2d2) ||
 	    ((vendorid == 0x119f) &&
 	     /* Bull ConnectX3 */
 	     (devid == 0x1b33 || devid == 0x1b73 ||
diff --git a/src/ibdiag_common.c b/src/ibdiag_common.c
index 41b749c..a3aaada 100644
--- a/src/ibdiag_common.c
+++ b/src/ibdiag_common.c
@@ -553,6 +553,7 @@ int is_mlnx_ext_port_info_supported(uint32_t vendorid,
 		      (devid >= 0x1bd0 && devid <= 0x1bd5))))
 			return 1;
 		if ((devid >= 0x1003 && devid <= 0x101b) ||
+		    (devid == 0xa2d2) ||
 		    ((vendorid == 0x119f) &&
 		     /* Bull ConnectX3 */
 		     (devid == 0x1b33 || devid == 0x1b73 ||
diff --git a/src/vendstat.c b/src/vendstat.c
index 5a3af21..71d7b98 100644
--- a/src/vendstat.c
+++ b/src/vendstat.c
@@ -150,6 +150,7 @@ static uint16_t ext_fw_info_device[][2] = {
 	{0xd2f0, 0xd2f0},	/* Quantum */
 	{0x01b3, 0x01b3},	/* IS-4 */
 	{0x1003, 0x101b},	/* Connect-X */
+	{0xa2d2, 0xa2d2},	/* BlueField */
 	{0x1b02, 0x1b02},	/* Bull SwitchX */
 	{0x1b50, 0x1b50},	/* Bull SwitchX */
 	{0x1ba0, 0x1ba0},	/* Bull SwitchIB */
-- 
2.14.4

