From d7c66eae7b007a0c5e74b7d842a4249e66b82906 Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Wed, 29 Sep 2021 11:58:24 +0000
Subject: [PATCH] added armv6 and enabled go

---
 SPECS/gcc.spec | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

diff --git a/SPECS/gcc.spec b/SPECS/gcc.spec
index 47b03f0..9f5a094 100644
--- a/SPECS/gcc.spec
+++ b/SPECS/gcc.spec
@@ -17,7 +17,7 @@
 %if 0%{?rhel} > 7
 %global build_ada 0
 %global build_objc 0
-%global build_go 0
+%global build_go 1
 %global build_libgccjit 0
 %else
 %ifarch %{ix86} x86_64 ia64 ppc %{power64} alpha s390x %{arm} aarch64
@@ -104,7 +104,7 @@
 Summary: Various compilers (C, C++, Objective-C, ...)
 Name: gcc
 Version: %{gcc_version}
-Release: %{gcc_release}%{?dist}
+Release: %{gcc_release}%{?dist}.redsleeve
 # libgcc, libgfortran, libgomp, libstdc++ and crtstuff have
 # GCC Runtime Exception.
 License: GPLv3+ and GPLv3+ with exceptions and GPLv2+ with exceptions and LGPLv2+ and BSD
@@ -1079,6 +1079,9 @@ CONFIGURE_OPTS="\
 	--with-tune=generic-armv7-a --with-arch=armv7-a \
 	--with-float=hard --with-fpu=vfpv3-d16 --with-abi=aapcs-linux \
 %endif
+%ifarch armv6hl
+	--with-arch=armv6 --with-float=hard --with-fpu=vfp \
+%endif
 %ifarch mips mipsel
 	--with-arch=mips32r2 --with-fp-32=xx \
 %endif
@@ -3167,6 +3170,10 @@ fi
 %endif
 
 %changelog
+* Wed Sep 29 2021 Jacco Ligthart <jacco@redsleeve.org> 8.4.1-1.redsleeve
+- Enabled gcc-go build on EL8
+- added armv6 compile flags
+
 * Tue Sep 29 2020 Marek Polacek <polacek@redhat.com> 8.4.1-1
 - update from GCC 8.4 release (#1868446)
 - remove symlinks to 32-bit versions of these static libraries: libasan.a,
-- 
2.27.0

